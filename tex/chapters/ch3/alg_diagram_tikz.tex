% Algorithm Diagram
\begin{tikzpicture}[roundnode/.style={circle, draw=green!60, fill=green!5, very
thick, minimum size=7mm}, squarenode/.style={rectangle, draw=red!60, fill=red!5,
very thick, minimum size=5mm},
]
    \node[squarenode](start) {START};
    \node[roundnode](database) [right=of start] {\input{tex/chapters/ch3/create_db_node.tex}};
    \node[squarenode](while) [right=of database] {WHILE NOT STOPPED};
    \node[roundnode](defector) [below=of database] {\input{tex/chapters/ch3/add_defector_node.tex}};
    \node[roundnode](select_strat) [right=of defector] {\input{tex/chapters/ch3/select_opponents_node.tex}};
   \node[squarenode](noise&probs) [left=of defector] {FOR ALL $p_{n}$ \& $p_{e}$};
   \node[roundnode](payoffs) [below=of defector] {\input{tex/chapters/ch3/calc_NE_node.tex}};
   \node[roundnode](tournament) [left=of payoffs] {\input{tex/chapters/ch3/run_tournament_node.tex}};
   \node[squarenode](writing) [right=of payoffs] {WRITE RESULTS TO DATABASE};
   \draw[->] (start.east) -- (database.west);
   \draw[->] (database.east) -- (while.west);
   \draw[->] (while.east) -- (15, 0) |- (select_strat.east);
   \draw[->] (select_strat.west) -- (defector.east);
   \draw[->] (defector.west) -- (noise&probs.east);
   \draw[->] (noise&probs.west) -- (-6, -6.12) |- (tournament.west);
   \draw[->] (tournament.east) -- (payoffs.west);
   \draw[->] (payoffs.east) -- (writing.west);
   \draw[->] (writing.east) -- (16, -13.1) |- (select_strat.east);
\end{tikzpicture}
